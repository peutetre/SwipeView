/*! swipeview 1.2.2 - Virtually infinite loop-able horizontal carousel - a fork of the original SwipeView from Matteo Spinelli */
var SwipeView=function(a,b){function c(a,b){var c;for(c=a.length-1;c>-1&&a[c]!==b;--c);return c}function d(a){return""===g?a:(a=a.charAt(0).toUpperCase()+a.substr(1),g+a)}var e=function(){};e.prototype={bind:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},unbind:function(a,b){this._events=this._events||{},a in this._events!=!1&&this._events[a].splice(c(this._events[a],b),1)},trigger:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}};var f=b.createElement("div").style,g=function(){for(var a,b="t,webkitT,MozT,msT,OT".split(","),c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in f)return b[c].substr(0,b[c].length-1);return!1}(),h=g?"-"+g.toLowerCase()+"-":"",i=d("transform"),j=d("transitionDuration"),k=d("perspective")in f,l="ontouchstart"in a,m=!!g,n=(d("transition")in f,k?" translateZ(0)":""),o="onorientationchange"in a?"orientationchange":"resize",p=l?"touchstart":"mousedown",q=l?"touchmove":"mousemove",r=l?"touchend":"mouseup",s=l?"touchcancel":"mouseup",t=function(){if(g===!1)return!1;var a={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"};return a[g]}(),u=function(a,b,c,d){"addEventListener"in a?a.addEventListener(b,c,d):"attachEvent"in a&&a.attachEvent("on"+b,c)},v=function(a,b,c){"removeEventListener"in a?a.removeEventListener(b,c):"detachEvent"in a&&a.detachEvent("on"+b,c)},w=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},x=function(a){return"pageX"in a?a.pageX:a.clientX+b.body.scrollLeft+b.documentElement.scrollLeft},y=function(a){return"pageY"in a?a.pageY:a.clientY+b.body.scrollTop+b.documentElement.scrollTop},z=0,A=function(c,d){var f,i,j,k;this.wrapper="string"==typeof c?b.querySelector(c):c,this.id=this.wrapper.id||"sw-id"+ ++z,this.options={text:null,numberOfPages:3,snapThreshold:null,hastyPageFlip:!1,vertical:!1,loop:!0,clientWidth:1024,clientHeight:145};for(f in d)this.options[f]=d[f];for(this.currentMasterPage=1,this.k=0,this.maxK=0,this.page=0,this.pageIndex=0,this.E=new e,this.customEvents=[],this.wrapperWidth=0,this.wrapperHeight=0,this.pageSize=0,this.initiated=!1,this.identifier=null,this.moved=!1,this.thresholdExceeded=!1,this.startX=0,this.startX=0,this.pointX=0,this.pointY=0,this.stepsX=0,this.stepsY=0,this.direction=0,this.directionLocked=!1,this.cssPosition=this.options.vertical?"top":"left",this.wrapper.style.overflow="hidden",this.wrapper.style.position="relative",this.masterPages=[],i=b.createElement("div"),i.className="swipeview-slider",i.style.cssText="position:relative;top:0;height:100%;width:100%;"+h+"transition-duration:0;"+h+"transform:translateZ(0);"+h+"transition-timing-function:ease-out",this.wrapper.appendChild(i),this.slider=i,this.refreshSize(),f=-1;2>f;f++)i=b.createElement("div"),i.style.cssText=h+"transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;"+this.cssPosition+":"+100*f+"%",i.dataset||(i.dataset={}),k=-1==f?this.options.numberOfPages-1:f,i.dataset.pageIndex=k,i.dataset.upcomingPageIndex=k,this.options.loop||-1!=f||(i.style.visibility="hidden"),this.slider.appendChild(i),this.masterPages.push(i);j=this.masterPages[1].className,this.masterPages[1].className=j?j+" swipeview-active":"swipeview-active";var m=this;this.handleEventF=function(a){m.handleEvent(a)},u(a,o,this.handleEventF,!1),u(this.wrapper,p,this.handleEventF,!1),u(this.wrapper,q,this.handleEventF,!1),u(this.wrapper,r,this.handleEventF,!1),u(this.slider,t,this.handleEventF,!1),"O"==g&&u(this.slider,t.toLowerCase(),this.handleEventF,!1),l||u(this.wrapper,"mouseout",this.handleEventF,!1)};return A.prototype={reset:function(a){this.goToPage(0),this.updatePageCount(a),this.refreshSize()},onFlip:function(a){this.E.bind("flip",a),this.customEvents.push(["flip",a])},onMoveOut:function(a){this.E.bind("moveout",a),this.customEvents.push(["moveout",a])},onMoveIn:function(a){this.E.bind("movein",a),this.customEvents.push(["movein",a])},onTouchStart:function(a){this.E.bind("touchstart",a),this.customEvents.push(["touchstart",a])},unbind:function(){for(;this.customEvents.length;)this.E.unbind(this.customEvents[0][0],this.customEvents[0][1]),this.customEvents.shift()},destroy:function(){this.unbind(),v(a,o,this.handleEventF),v(this.wrapper,p,this.handleEventF),v(this.wrapper,q,this.handleEventF),v(this.wrapper,r,this.handleEventF),v(this.slider,t,this.handleEventF),l||v(this.wrapper,"mouseout",this.handleEventF)},refreshSize:function(){this.wrapperWidth=0===this.wrapper.clientWidth?this.options.clientWidth:this.wrapper.clientWidth,this.wrapperHeight=0===this.wrapper.clientHeight?this.options.clientHeight:this.wrapper.clientHeight,this.wrapperSize=this.options.vertical?this.wrapperHeight:this.wrapperWidth,this.pageSize=this.options.vertical?this.wrapperHeight:this.wrapperWidth,this.maxK=-this.options.numberOfPages*this.pageSize+this.wrapperSize,this.snapThreshold=null===this.options.snapThreshold?Math.round(.15*this.pageSize):/%/.test(this.options.snapThreshold)?Math.round(this.pageSize*this.options.snapThreshold.replace("%","")/100):this.options.snapThreshold},updatePageCount:function(a){this.options.numberOfPages=a,this.maxK=-this.options.numberOfPages*this.pageSize+this.wrapperSize},goToPage:function(a){var b;for(this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,""),b=0;3>b;b++)className=this.masterPages[b].className,/(^|\s)swipeview-loading(\s|$)/.test(className)||(this.masterPages[b].className=className?className+" swipeview-loading":"swipeview-loading");a=0>a?0:a>this.options.numberOfPages-1?this.options.numberOfPages-1:a,this.page=a,this.pageIndex=a,this.slider.style[j]="0s",this.__pos(-a*this.pageSize),this.currentMasterPage=this.page+1-3*Math.floor((this.page+1)/3),this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className+" swipeview-active",0===this.currentMasterPage?(this.masterPages[2].style[this.cssPosition]=100*this.page-100+"%",this.masterPages[0].style[this.cssPosition]=100*this.page+"%",this.masterPages[1].style[this.cssPosition]=100*this.page+100+"%",this.masterPages[2].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[0].dataset.upcomingPageIndex=this.page,this.masterPages[1].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1):1==this.currentMasterPage?(this.masterPages[0].style[this.cssPosition]=100*this.page-100+"%",this.masterPages[1].style[this.cssPosition]=100*this.page+"%",this.masterPages[2].style[this.cssPosition]=100*this.page+100+"%",this.masterPages[0].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[1].dataset.upcomingPageIndex=this.page,this.masterPages[2].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1):(this.masterPages[1].style[this.cssPosition]=100*this.page-100+"%",this.masterPages[2].style[this.cssPosition]=100*this.page+"%",this.masterPages[0].style[this.cssPosition]=100*this.page+100+"%",this.masterPages[1].dataset.upcomingPageIndex=0===this.page?this.options.numberOfPages-1:this.page-1,this.masterPages[2].dataset.upcomingPageIndex=this.page,this.masterPages[0].dataset.upcomingPageIndex=this.page==this.options.numberOfPages-1?0:this.page+1),this.__flip(!0)},next:function(){(this.options.loop||this.k!=this.maxK)&&(this.direction=-1,this.k-=1,this.__checkPosition())},prev:function(){(this.options.loop||0!==this.k)&&(this.direction=1,this.k+=1,this.__checkPosition())},handleEvent:function(a){switch(a.type){case p:this.__start(a);break;case q:this.__move(a);break;case"mouseout":if(this.initiated){for(var b=this.wrapper.getElementsByTagName("*"),c=0;c<b.length;c++)if(a.toElement==b[c])return;this.__end(a)}break;case s:case r:this.__end(a);break;case o:this.__resize();break;case t:case"otransitionend":a.target!=this.slider||this.options.hastyPageFlip||this.__flip()}},__pos:function(a){this.k=a,m?this.slider.style[i]=(this.options.vertical?"translate(0,"+a+"px)":"translate("+a+"px,0)")+n:this.options.vertical?this.slider.style.top=a+"px":this.slider.style.left=a+"px"},__resize:function(){this.refreshSize(),this.slider.style[j]="0s",this.__pos(-this.page*this.pageSize)},__start:function(a){if(!this.initiated){var b=l?a.targetTouches[0]:a;this.initiated=!0,this.identifier=b.identifier,this.moved=!1,this.thresholdExceeded=!1,this.startX=x(b),this.startY=y(b),this.pointX=x(b),this.pointY=y(b),this.stepsX=0,this.stepsY=0,this.direction=0,this.directionLocked=!1,this.slider.style[j]="0s",this.E.trigger("touchstart")}},__move:function(a){if(this.initiated){var b,c,d;if(l){for(b=0,c=a.changedTouches.length;c>b;b++)a.changedTouches.item(b).identifier===this.identifier&&(d=a.changedTouches.item(b));if(!d)return}else d=a;var e=x(d)-this.pointX,f=y(d)-this.pointY,g=this.options.vertical?this.k+f:this.k+e,h=this.options.vertical?Math.abs(y(d)-this.startY):Math.abs(x(d)-this.startX);if(!(Math.abs(h)>=this.pageSize||(this.moved=!0,this.pointX=x(d),this.pointY=y(d),this.direction=this.options.vertical?f>0?1:0>f?-1:0:e>0?1:0>e?-1:0,this.stepsX+=Math.abs(e),this.stepsY+=Math.abs(f),this.stepsX<10&&this.stepsY<10))){if(!this.directionLocked&&(this.options.vertical?this.stepsX>this.stepsY:this.stepsY>this.stepsX))return this.initiated=!1,void 0;w(a),this.directionLocked=!0,!this.options.loop&&(g>0||g<this.maxC)&&(g=this.k+(this.options.vertical?f:e)/2),!this.thresholdExceeded&&h>=this.snapThreshold?(this.thresholdExceeded=!0,this.E.trigger("moveout")):this.thresholdExceeded&&h<this.snapThreshold&&(this.thresholdExceeded=!1,this.E.trigger("movein")),this.__pos(g)}}},__end:function(a){if(this.initiated){var b;if(l){for(var c=0,d=a.touches.length;d>c;c++)if(a.touches.item(c).identifier===this.identifier)return;for(c=0,d=a.changedTouches.length;d>c;c++)a.changedTouches.item(c).identifier===this.identifier&&(b=a.changedTouches.item(c));if(!b)return this.__pos(-this.page*this.pageSize),this.initiated=!1,void 0}else b=a;var e=this.options.vertical?Math.abs(y(b)-this.startY):Math.abs(x(b)-this.startX);if(this.initiated=!1,this.moved)return!this.options.loop&&(this.k>0||this.k<this.maxK)&&(e=0,this.E.trigger("movein")),e<this.snapThreshold?(this.slider.style[j]=Math.floor(300*e/this.snapThreshold)+"ms",this.__pos(-this.page*this.pageSize),void 0):(this.__checkPosition(),void 0)}},abort:function(){this.initiated&&(this.__pos(-this.page*this.pageSize),this.initiated=!1)},__checkPosition:function(){var a,b,c;this.masterPages[this.currentMasterPage].className=this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/,""),this.direction>0?(this.page=-Math.ceil(this.k/this.pageSize),this.currentMasterPage=this.page+1-3*Math.floor((this.page+1)/3),this.pageIndex=0===this.pageIndex?this.options.numberOfPages-1:this.pageIndex-1,a=this.currentMasterPage-1,a=0>a?2:a,this.masterPages[a].style[this.cssPosition]=100*this.page-100+"%",b=this.page-1):(this.page=-Math.floor(this.k/this.pageSize),this.currentMasterPage=this.page+1-3*Math.floor((this.page+1)/3),this.pageIndex=this.pageIndex==this.options.numberOfPages-1?0:this.pageIndex+1,a=this.currentMasterPage+1,a=a>2?0:a,this.masterPages[a].style[this.cssPosition]=100*this.page+100+"%",b=this.page+1),c=this.masterPages[this.currentMasterPage].className,/(^|\s)swipeview-active(\s|$)/.test(c)||(this.masterPages[this.currentMasterPage].className=c?c+" swipeview-active":"swipeview-active"),c=this.masterPages[a].className,/(^|\s)swipeview-loading(\s|$)/.test(c)||(this.masterPages[a].className=c?c+" swipeview-loading":"swipeview-loading"),b-=Math.floor(b/this.options.numberOfPages)*this.options.numberOfPages,this.masterPages[a].dataset.upcomingPageIndex=b,newC=-this.page*this.pageSize,this.slider.style[j]=Math.floor(500*Math.abs(this.k-newC)/this.pageSize)+"ms",this.options.loop||(this.masterPages[a].style.visibility=0===newC||newC==this.maxK?"hidden":""),this.k==newC?this.__flip():(this.__pos(newC),this.options.hastyPageFlip&&this.__flip())},__flip:function(a){this.E.trigger("flip",{triggeredByGoto:!!a});for(var b=0;3>b;b++)this.masterPages[b].className=this.masterPages[b].className.replace(/(^|\s)swipeview-loading(\s|$)/,""),this.masterPages[b].dataset.pageIndex=this.masterPages[b].dataset.upcomingPageIndex}},A}(window,document);